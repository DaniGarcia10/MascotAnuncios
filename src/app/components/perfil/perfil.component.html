<div class="d-flex flex-column flex-lg-row">
  <!-- Menú lateral -->
  <div class="menu-lateral p-3 col-12 col-lg-3">
    <ul class="list-group">
      <li class="list-group-item" [class.active]="activeSection === 'general'" (click)="setActiveSection('general')">
        Información general
      </li>
      <li class="list-group-item" [class.active]="activeSection === 'password'" (click)="setActiveSection('password')">
        Cambiar contraseña
      </li>
      <li *ngIf="usuario?.id_criadero" class="list-group-item" [class.active]="activeSection === 'criadero'" (click)="setActiveSection('criadero')">
        Información de mi criadero
      </li>
    </ul>
  </div>

  <!-- Contenido principal -->
  <div class="contenido-principal flex-grow-1 p-4 col-12 col-lg-9 ">
    <div *ngIf="activeSection === 'general'">
      <div class="card custom-card mx-auto">
        <div class="card-header custom-card-header text-center">
          <h3 class="card-title-grande">Mi Perfil</h3>
        </div>
        <div class="card-body custom-card-body">
          <form [formGroup]="perfilForm" *ngIf="usuario; else noUsuario">
            <div class="text-center mb-3">
              <img 
                *ngIf="imagenUrlPerfil" 
                [src]="imagenUrlPerfil" 
                alt="Foto de perfil" 
                class="img-thumbnail"
              />
            </div>
            <div class="mb-3">
              <label for="nombre" class="form-label"><strong>Nombre:</strong></label>
              <input id="nombre" formControlName="nombre" placeholder="Introduzca su nombre" class="form-control" [readonly]="!editMode" />
            </div>
            <div class="mb-3">
              <label for="apellidos" class="form-label"><strong>Apellidos:</strong></label>
              <input id="apellidos" formControlName="apellidos" placeholder="Introduzca sus apellidos" class="form-control" [readonly]="!editMode" />
            </div>
            <div class="mb-3">
              <label for="email" class="form-label"><strong>Email:</strong></label>
              <input id="email" formControlName="email" placeholder="Introduzca su email" class="form-control" [readonly]="!editMode" />
            </div>
            <div class="mb-3">
              <label for="telefono" class="form-label"><strong>Teléfono:</strong></label>
              <input id="telefono" formControlName="telefono" placeholder="Introduzca su teléfono" class="form-control" [readonly]="!editMode" />
            </div>
            <div class="d-flex justify-content-center mt-4">
              <button *ngIf="editMode" type="button" class="btn btn-danger m-2 w-50" (click)="cancelEdit()">Cancelar</button>
              <button *ngIf="editMode" type="submit" class="btn-default m-2 w-50">Guardar</button>
              <button *ngIf="!editMode" type="button" class="btn-default m-2 w-50" (click)="toggleEditMode()">Modificar Perfil</button>
            </div>
          </form>
          <ng-template #noUsuario>
            <p class="text-center text-danger">No se encontraron datos del usuario.</p>
          </ng-template>
        </div>
      </div>
    </div>

    <div *ngIf="activeSection === 'password'">
      <div class="card mx-auto custom-card">
        <div class="card-header custom-card-header text-center">
          <h3 class="card-title-grande">Cambiar Contraseña</h3>
        </div>
        <div class="card-body custom-card-body">
          <form [formGroup]="passwordForm" (ngSubmit)="cambiarPassword()">
            <div class="mb-3">
              <label for="passwordActual" class="form-label"><strong>Contraseña actual:</strong></label>
              <input id="passwordActual" formControlName="passwordActual" type="password" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="nuevaPassword" class="form-label"><strong>Nueva contraseña:</strong></label>
              <input id="nuevaPassword" formControlName="nuevaPassword" type="password" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="confirmarPassword" class="form-label"><strong>Confirmar nueva contraseña:</strong></label>
              <input id="confirmarPassword" formControlName="confirmarPassword" type="password" class="form-control" />
            </div>
            <button type="submit" class="btn-default w-100">Cambiar Contraseña</button>
          </form>
        </div>
      </div>
    </div>

    <div *ngIf="activeSection === 'criadero'">
      <div *ngIf="criadero; else noCriadero" class="card custom-card mx-auto">
        <div class="card-header custom-card-header text-center">
          <h3 class="card-title-grande">Información del Criadero</h3>
        </div>
        <div class="card-body custom-card-body text-center">
          <img *ngIf="imagenUrlCriadero" [src]="imagenUrlCriadero" alt="Foto del criadero" class="img-thumbnail mb-3" />
          <h5><strong>Nombre:</strong> {{ criadero.nombre }}</h5>
          <p><strong>Núcleo Zoológico:</strong> {{ criadero.nucleo_zoologico }}</p>
          <p><strong>Ubicación:</strong> {{ criadero.ubicacion }}</p>
          <p><strong>Fecha de Registro:</strong> {{ criadero.fecha_registro }}</p>
          <p>
            <span *ngIf="criadero.verificado; else noVerificado" class="text-success">
              Verificado <i class="bi bi-patch-check-fill"></i>
            </span>
            <ng-template #noVerificado>
              <span class="text-danger">
                No verificado <i class="bi bi-patch-check-fill"></i>
              </span>
            </ng-template>
          </p>
        </div>
      </div>
      <ng-template #noCriadero>
        <p class="text-center text-danger">No se encontró información del criadero.</p>
      </ng-template>
    </div>
  </div>
</div>
