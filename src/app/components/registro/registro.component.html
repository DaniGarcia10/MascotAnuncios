<div class="registro-wrapper position-relative d-flex flex-column flex-grow-1">
  <!-- Contenido principal -->
  <div class="d-flex justify-content-center align-items-center flex-grow-1 px-3 py-5">
    <div class="card custom-card w-100" style="max-width: 600px;">
      <div class="card-header custom-card-header text-center">
        <h3 class="card-title-grande">Registro</h3>
      </div>
      <div class="card-body custom-card-body">
        <form [formGroup]="formRegistro" (ngSubmit)="onSubmit()">
          <div class="mb-3">
            <label for="nombre" class="form-label">Nombre:</label>
            <input id="nombre" formControlName="nombre" type="text" class="form-control" placeholder="Ingresa tu nombre" required>
            <div *ngIf="formRegistro.get('nombre')?.invalid && formRegistro.get('nombre')?.touched" class="text-danger">
              <small *ngIf="formRegistro.get('nombre')?.errors?.['required']">El nombre es obligatorio.</small>
              <small *ngIf="formRegistro.get('nombre')?.errors?.['maxlength']">M√°ximo 30 caracteres permitidos.</small>
            </div>
          </div>
          <div class="mb-3">
            <label for="apellidos" class="form-label">Apellidos:</label>
            <input id="apellidos" formControlName="apellidos" type="text" class="form-control" placeholder="Ingresa tus apellidos" required>
            <div *ngIf="formRegistro.get('apellidos')?.invalid && formRegistro.get('apellidos')?.touched" class="text-danger">
              <small *ngIf="formRegistro.get('apellidos')?.errors?.['required']">Los apellidos son obligatorios.</small>
              <small *ngIf="formRegistro.get('apellidos')?.errors?.['maxlength']">M√°ximo 50 caracteres permitidos.</small>
            </div>
          </div>
          <div class="mb-3">
            <label for="email" class="form-label">Correo electr√≥nico:</label>
            <input id="email" formControlName="email" type="email" class="form-control" placeholder="Ingresa tu correo" required>
            <div *ngIf="formRegistro.get('email')?.invalid && formRegistro.get('email')?.touched" class="text-danger">
              <small *ngIf="formRegistro.get('email')?.errors?.['required']">El correo es obligatorio.</small>
              <small *ngIf="formRegistro.get('email')?.errors?.['email']">El formato del correo no es v√°lido.</small>
              <small *ngIf="formRegistro.get('email')?.errors?.['maxlength']">M√°ximo 50 caracteres permitidos.</small>
            </div>
          </div>
          <div class="mb-3">
            <label for="telefono" class="form-label">Tel√©fono:</label>
            <input id="telefono" formControlName="telefono" type="text" class="form-control" placeholder="Ingresa tu tel√©fono" required>
            <div *ngIf="formRegistro.get('telefono')?.invalid && formRegistro.get('telefono')?.touched" class="text-danger">
              <small *ngIf="formRegistro.get('telefono')?.errors?.['required']">El tel√©fono es obligatorio.</small>
              <small *ngIf="formRegistro.get('telefono')?.errors?.['pattern']">Solo se permiten n√∫meros.</small>
              <small *ngIf="formRegistro.get('telefono')?.errors?.['maxlength']">M√°ximo 15 caracteres permitidos.</small>
            </div>
          </div>
          <div class="mb-3">
            <label for="password" class="form-label">Contrase√±a:</label>
            <input id="password" formControlName="password" type="password" class="form-control" placeholder="Ingresa tu contrase√±a" required>
            <div *ngIf="formRegistro.get('password')?.invalid && formRegistro.get('password')?.touched" class="text-danger">
              <small *ngIf="formRegistro.get('password')?.errors?.['required']">La contrase√±a es obligatoria.</small>
              <small *ngIf="formRegistro.get('password')?.errors?.['minlength']">M√≠nimo 6 caracteres requeridos.</small>
              <small *ngIf="formRegistro.get('password')?.errors?.['maxlength']">M√°ximo 20 caracteres permitidos.</small>
            </div>
          </div>
          <div class="mb-3">
            <label for="fotoPerfil" class="form-label">Foto de Perfil:</label>
            <input id="fotoPerfil" type="file" class="form-control" (change)="onFileSelected($event)">
          </div>
          <div class="form-check mb-3">
            <input id="vendedor" formControlName="vendedor" type="checkbox" class="form-check-input">
            <label for="vendedor" class="form-check-label">¬øEres vendedor?</label>
          </div>
          <div *ngIf="isVendedor()" formGroupName="criadero">
            <h5 class="mt-3">Datos del Criadero</h5>
            <div class="mb-3">
              <label for="nucleo-zoologico" class="form-label">N√∫cleo Zool√≥gico:</label>
              <input id="nucleo-zoologico" formControlName="nucleo_zoologico" type="text" class="form-control" placeholder="Ingresa el n√∫cleo zool√≥gico">
              <div *ngIf="formRegistro.get('criadero.nucleo_zoologico')?.invalid && formRegistro.get('criadero.nucleo_zoologico')?.touched" class="text-danger">
                <small *ngIf="formRegistro.get('criadero.nucleo_zoologico')?.errors?.['required']">El n√∫cleo zool√≥gico es obligatorio.</small>
                <small *ngIf="formRegistro.get('criadero.nucleo_zoologico')?.errors?.['pattern']">Solo se permiten caracteres alfanum√©ricos.</small>
                <small *ngIf="formRegistro.get('criadero.nucleo_zoologico')?.errors?.['minlength']">Debe tener exactamente 12 caracteres.</small>
                <small *ngIf="formRegistro.get('criadero.nucleo_zoologico')?.errors?.['maxlength']">Debe tener exactamente 12 caracteres.</small>
              </div>
            </div>
            <div class="mb-3">
              <label for="criadero-nombre" class="form-label">Nombre del Criadero:</label>
              <input id="criadero-nombre" formControlName="nombre" type="text" class="form-control" placeholder="Ingresa el nombre del criadero" required>
              <div *ngIf="formRegistro.get('criadero.nombre')?.invalid && formRegistro.get('criadero.nombre')?.touched" class="text-danger">
                <small *ngIf="formRegistro.get('criadero.nombre')?.errors?.['required']">El nombre del criadero es obligatorio.</small>
                <small *ngIf="formRegistro.get('criadero.nombre')?.errors?.['maxlength']">M√°ximo 50 caracteres permitidos.</small>
              </div>
            </div>
            <div class="mb-3">
              <label for="criadero-ubicacion" class="form-label">Ubicaci√≥n del Criadero:</label>
              <input id="criadero-ubicacion" formControlName="ubicacion" type="text" class="form-control" placeholder="Ingresa la provincia del criadero">
              <div *ngIf="formRegistro.get('criadero.ubicacion')?.invalid && formRegistro.get('criadero.ubicacion')?.touched" class="text-danger">
                <small *ngIf="formRegistro.get('criadero.ubicacion')?.errors?.['required']">La ubicaci√≥n es obligatoria.</small>
                <small *ngIf="formRegistro.get('criadero.ubicacion')?.errors?.['maxlength']">M√°ximo 100 caracteres permitidos.</small>
              </div>
            </div>
            <div class="mb-3">
              <label for="fotoPerfilCriadero" class="form-label">Foto de Perfil del Criadero:</label>
              <input id="fotoPerfilCriadero" type="file" class="form-control" (change)="onFileSelectedCriadero($event)">
              <div *ngIf="isVendedor() && !fotoPerfilCriadero && isSubmitting" class="text-danger">
                <small>La foto de perfil del criadero es obligatoria.</small>
              </div>
            </div>
            <!-- Bloque de verificaci√≥n de criadero profesional -->
            <div class="mt-4 p-3 border rounded">
              <h5 class="mb-2">Verificaci√≥n de Criadero Profesional</h5>
              <p class="mb-2">
                Para poder publicar anuncios necesitamos verificar tu identidad y autorizaci√≥n legal, para as√≠ garantizar la confianza de los compradores.<br>
                Revisaremos tu documentaci√≥n en menos de 24 horas.
              </p>
              <div class="mb-2">
                <span class="fw-bold">üìë Documentaci√≥n obligatoria:</span>
                <ul class="mb-1">
                  <li>DNI/NIE del titular (anverso y reverso en una sola imagen o PDF)</li>
                  <li>N√∫mero de N√∫cleo Zool√≥gico (NNZ) v√°lido</li>
                  <li>Certificado de inscripci√≥n en el Registro de N√∫cleos Zool√≥gicos</li>
                </ul>
              </div>
              <div class="mb-2">
                <span class="fw-bold">üì§ Sube tus archivos:</span><br>
                <input type="file" class="form-control mt-1" multiple accept=".pdf,.jpg,.jpeg,.png" (change)="onDocumentacionFilesSelected($event)">
                <small class="text-muted">
                  Formatos admitidos: PDF, JPG, PNG<br>
                  Tama√±o m√°ximo: 20 MB por archivo
                </small>
                <div *ngIf="isVendedor() && documentacionFiles.length === 0 && isSubmitting" class="text-danger mt-1">
                  <small>La documentaci√≥n del criadero es obligatoria.</small>
                </div>
              </div>
              <div class="mb-2">
                <span class="fw-bold">‚úÖ Importante:</span>
                <ul class="mb-1">
                  <li>La informaci√≥n debe coincidir con el titular de la cuenta.</li>
                  <li>Nos reservamos el derecho de rechazar documentos ilegibles o inv√°lidos.</li>
                </ul>
              </div>
              <div>
                Una vez verificado, tus anuncios aparecer√°n como ‚ÄúCriadero verificado‚Äù y podr√°s destacar tus cachorros.
              </div>
            </div>
          </div>
          <button type="submit" class="btn-default w-100" [disabled]="isSubmitting">
            {{ isSubmitting ? 'Registrando...' : 'Registrarse' }}
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
